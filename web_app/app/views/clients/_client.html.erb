<tr id="client-<%= client.id %>" class="<%= cycle('odd', 'even') %>;">
  <td>
    <% if client.current? %>
      <b>Aktiv</b>
    <% else client.ok? %>
      <%= link_to I18n.t("actions.activate_client"), select_contest_contestant_client_url(client.contestant, client), :method => :post %>
    <% end %>
  </td>
  <td>
    <% if client.broken? %>

    <% elsif client.tested? %>
      <%= client.test_results.join('/') %> bestanden
    <% elsif client.testable? %>
      <span class="testActions">
        <span class="disabled">Testen</span>
        <%= link_to "Testen",
          test_contest_contestant_client_url(client.contestant, client), :method => :post,
          :class => "enabled" %>
      </span>
    <% end %>
  </td>
  <td>
    &nbsp;
    <% if client.testing? %>
      <%= image_tag("ui/spinner.gif") %>
      <script type="text/javascript">
        //<![CDATA[
        setTimeout(function() {
          jQuery.ajax({
            data:'authenticity_token=' + encodeURIComponent('<%= form_authenticity_token %>')
            ,dataType:'script'
            ,type:'get'
            ,url:'<%= contest_contestant_client_status_url(client.contestant, client) %>'
          })
        }, 3 * 1000)
        //]]>
      </script>
    <% elsif client.ok? %>
      <%= image_tag("state/ok.png") %>
    <% elsif client.broken? %>
      <%= image_tag("state/warning.png") %>
    <% end %>
  </td>
  <td>
    <%= client.file_file_name %><br/>
    <span style="font-size: 11px;">
      Am <%= l(client.created_at.try(:to_date), :format => :long) %>
      von <%= client.author.name %>
    </span>
  </td>
  <td>
    <% main_file_entry_name = client.main_file_entry.try(:file_name) %>
    <% main_file_entry_name ||= content_tag(:i, "Nicht gesetzt") %>
    <% if !client.testing? and !client.ok? %>
      <%= link_to main_file_entry_name, edit_contest_contestant_client_url(client.contestant, client) %>
    <% else %>
      <%= main_file_entry_name %>
    <% end %>
  </td>
  <td>
    <% if client.testing? %>
      <% if client.test_match.job.locked_at %>
        <span><%= test_progress(client) %></span><br/>
        <span style="font-size: 11px;">Testet seit <%= (Time.now - client.test_match.job.locked_at).round %> Sekunden</span>
      <% else %>
        <span>Test Ã¼ber <%= client.test_match.rounds.count %> Runden</span><br/>
        <span style="font-size: 11px;">Wartet seit <%= (Time.now - client.test_match.job.created_at).round %> Sekunden</span>
      <% end %>
    <% else %>
      <% if may_delete_client? and not client.current? %>
        <% delete_image = image_tag "actions/delete.png", :title => I18n.t("actions.delete") %>
        <%= link_to delete_image, hide_contest_contestant_client_url(client.contestant, client), :confirm => I18n.t("messages.confirm_hiding", :name => client.file_file_name), :method => :post %>
      <% end -%>
    <% end %>
  </td>
</tr>

<%
render_tabnav :person, :html => { :class => "tabs_tabnav" } do
  
  add_tab do |t|
    t.named t("titles.edit")
    if @contestant.nil?
      t.links_to url_for [:edit, @context, @person]
    else
      t.links_to url_for [:edit, @context, @contestant, @person]
    end
    t.highlights_on :controller => "people", :action => "edit"
  end
  add_tab do |t|
    t.named "E-Mail-Benachrichtigungen"
    if @contestant.nil?
      t.links_to url_for [:edit, @context, @person, :email_event]
    else
      t.links_to url_for [:edit, @context, @contestant, @person, :email_event]
    end
    t.highlights_on :controller => "email_events", :action => "edit" 
  end

  if administrator?
    add_tab do |t|
      t.named "Ticket Einstellungen"
      if @contestant
        t.links_to url_for [:ticket_settings, @context, @contestant, @person]
      else
        t.links_to url_for [:ticket_settings, @context, @person]
      end
      t.highlights_on :controller => "people", :action => "ticket_settings"
    end
  end
  
  if @person.has_role?(:tutor) or @person.has_role?(:helper) or @person.has_role?(:administrator)
    add_tab do |t|
      t.named Contract.human_name(:count => 2) 
      t.links_to url_for [@context, @person, :contracts]
      t.highlights_on :controller => "contracts"
    end if administrator? or @person == @current_user

    add_tab do |t|
      t.named TimeEntry.human_name(:count => 2)
      t.links_to url_for time_entries_url(:filter => {:person_id => @person.id}, :group_by => "person")
      t.highlights_on :controller => "time_entries"
    end if administrator? or @person == @current_user
  end
end
%>

<style type="text/css">
  .played,
  .fc-agenda .played .fc-event-time,
  .played a {
    background-color: green; /* background color */
    border-color: green;     /* border color (often same as background-color) */
    color: white;           /* text color */
  }
</style>

<div id="actions">
  <% if @contest.ready? and !@contest.begun? and administrator? %>
    <% link_to reset_matchdays_contest_url(@contest), :method => "post" do %>
      <%= image_tag('actions/destroy.png') %> <%= t "views.clear_schedule" %>
    <% end %>
  <% end %>
</div>

<h1>
  <%= @contest.name %>
</h1>

<% tabnav :contest do %>
  <% unless @contest.ready? %>
    <% contestant_count = @contest.contestants.ranked.visible.count %>
    <% if contestant_count <= 1 %>
      <%= t("views.need_more_contestants_for_contest", {:count => contestant_count, :contestant_name => Contestant.human_name(:count => contestant_count)}) %>
    <% else %>
      <% semantic_form_for :schedule, :url => refresh_matchdays_contest_url(@contest), :method => :post do |f| %>
        <% matchday_count = @contest.estimate_matchday_count %>
        <p>
          <%= t "views.contest_has" %><b><%= contestant_count %> <%= Contestant.human_name(:count => contestant_count) %></b>
          <%= t "views.therefore" %> <b><%= matchday_count %> <%= Matchday.human_name(:count => matchday_count) %></b> haben.
        </p>
        <% f.inputs do %>
          <%= f.input :start_at, :as => :date, :label => "Erster Spieltag" %>
          <% trials = (0..5).to_a %>
          <% trials.delete(1) if contestant_count.odd? %>
          <%= f.input :trial_days, :label => "Probespieltage", :collection => trials, :include_blank => false %>
          <% days = (0..6).collect { |i| [t("date.abbr_day_names")[i], i] } %>
          <%= f.input :weekdays, :as => :check_boxes, :collection => days, :selected => [1,4],
            :hint => I18n.t("views.data_can_be_moved"), :label => I18n.t("views.weekdays"),
            :wrapper_html => { :class => "horizontal" } %>
            <%= f.input :play_automatically, :as => :boolean, :checked => false, :label => "Automatisch spielen", :style => "vertical-align: middle" %>
        <% end %>
        <%= f.buttons %>
      <% end %>
    <% end %>
  <% else %>
    <%= render :partial => "calendar" %>
    <p style="margin-top: 15px">
    <% semantic_form_for :contest, :url => update_schedule_contest_url(@contest), :method => :post do |f| %>
      <fieldset>
        <legend>Einstellungen</legend>
        <% f.inputs do %>
          <%= f.input :play_automatically, :as => :boolean, :label => "Automatisch spielen", :style => "vertical-align: middle" %>
        <% end %>
        <%= f.buttons %>
      </fieldset>
    <% end %>
    </p>
  <% end %>
<% end %>

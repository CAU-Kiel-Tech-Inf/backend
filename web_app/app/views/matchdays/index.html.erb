<div style="float: right;">
  <%= button_to "Spielplan generieren", refresh_matchdays_contest_url(@contest), :method => "post" %>
</div>

<h1><%=h @contest.name %> / Spieltage</h1>
<% if @matchdays.empty? %>
  <p>Es liegt noch kein Spielplan vor.</p>
<% else %>

  <div id="calendar"></div>

  <script type='text/javascript'>

    $(document).ready(function() {
      var locale = $.datepicker.regional['de'];
      var calSettings = {};
      $.extend(calSettings, locale, {
        editable: false
        ,buttonText: {today: "Heute"}
        ,events: '<%= contest_matchdays_url(@contest, :format => "json", :calendar => true) %>'
      });
      $('#calendar').fullCalendar(calSettings);

    });

  </script>

  <table>
    <tr>
      <th>&nbsp;</th>
      <th>Wann</th>
      <th>Gespielt?</th>
      <th>&nbsp;</th>
    </tr>

    <% @matchdays.each_with_index do |matchday,i| %>
      <tr>
        <td><%= i+1 %>. Spieltag am</td>
        <td><%= l(matchday.when, :format => :long) %></td>
        <td><%= matchday_status(matchday) %></td>
        <td><%= link_to 'Show', [@contest, matchday] %></td>
      </tr>
    <% end %>
  </table>

<% end %>
